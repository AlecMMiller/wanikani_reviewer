(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(2),i=n.n(r),s=n(14),c=n.n(s),u=(n(22),n(3)),o=n(4),h=n(1),l=n(6),p=n(5),b=(n(23),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).checkLogin=a.checkLogin.bind(Object(h.a)(a)),a}return Object(o.a)(n,[{key:"checkLogin",value:function(){var e=document.getElementById("api_key").value;this.props.checkLogin(e)}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"\u3088\u3046\u3053\u305d!"}),Object(a.jsx)("p",{children:"Please enter your API key"}),Object(a.jsx)("input",{type:"text",id:"api_key"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:this.checkLogin,children:"Login"})]})}}]),n}(r.Component)),v=n(16),d=n(9),j=n(8),f=n.n(j),g=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"handleChange",value:function(e){e.target.value;Object(v.a)(Object(d.a)(n.prototype),"handleChange",this).call(this,e)}}]),n}(function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setDefault(t),this.props.onChange(t)}},{key:"setDefault",value:function(e){f.a.set(this.props.cookie,e)}},{key:"getDefault",value:function(){var e=f.a.get(this.props.cookie);return e?e!==this.props.defaultValue&&this.props.onChange(e):(e=this.props.defaultValue,this.setDefault(e)),e}},{key:"render",value:function(){var e=this.props.title,t=this.getDefault();return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:e}),Object(a.jsx)("input",{type:"text",defaultValue:t,onChange:this.handleChange}),Object(a.jsx)("br",{})]})}}]),n}(r.Component));var y=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).logout=a.logout.bind(Object(h.a)(a)),a.startReview=a.startReview.bind(Object(h.a)(a)),a.updateDaysToReview=a.updateDaysToReview.bind(Object(h.a)(a)),a.updatePercentThreshold=a.updatePercentThreshold.bind(Object(h.a)(a)),a.greeting=function(){var e=(new Date).getHours();return e<3||e>22?"\u304a\u3084\u3059\u307f\u3093\u3055\u3044":e<12?"\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059":e<18?"\u3053\u3093\u306b\u3061\u306f":"\u3053\u3093\u3070\u3093\u306f"}(),a.state={days_to_review:"30",percent_threshold:"85"},a}return Object(o.a)(n,[{key:"logout",value:function(){this.props.logout()}},{key:"startReview",value:function(){var e=this.state.percent_threshold,t=this.state.days_to_review;this.props.start(e,t)}},{key:"updateDaysToReview",value:function(e){this.setState({days_to_review:e})}},{key:"updatePercentThreshold",value:function(e){this.setState({percent_threshold:e})}},{key:"render",value:function(){var e=this.props.name,t=this.greeting,n=this.state.days_to_review,r=this.state.percent_threshold;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[t,", ",e]}),Object(a.jsx)("button",{onClick:this.logout,children:"Logout"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Review Settings"}),Object(a.jsx)(g,{title:"Days to review",description:"days",defaultValue:n,cookie:"review-days",onChange:this.updateDaysToReview}),Object(a.jsx)(g,{title:"Percent Threshold",description:"days",defaultValue:r,cookie:"review-percent",onChange:this.updatePercentThreshold}),Object(a.jsx)("button",{onClick:this.startReview,children:"Review"})]})]})}}]),n}(r.Component);var k=function(){return Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Loading!"})})},O=n(7),w=n.n(O),x=n(10);function m(e,t){var n,a="https://api.wanikani.com/v2/"+e;return t&&(a+="?"+(n=t,Object.keys(n).map((function(e){return e+"="+n[e]})).join("&"))),a}function _(e){return"Bearer "+e}function C(e,t,n){return R.apply(this,arguments)}function R(){return(R=Object(x.a)(w.a.mark((function e(t,n,a){var r,i,s,c,u,o,h=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>3&&void 0!==h[3]?h[3]:null,e.next=3,fetch(t,{method:"GET",headers:{Authorization:_(n)}});case 3:if((i=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,i.json();case 10:if(s=e.sent,c=s.pages,u=s.data,o=null,c&&(o=c.next_url,r&&(u=r.concat(u))),!o){e.next=19;break}return e.abrupt("return",C(o,n,a,u));case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n,a){return C(m(e,t),n,a)}function L(e,t,n){var a=m(e,t);return fetch(a,{method:"GET",headers:{Authorization:_(n)}})}function D(){return(D=Object(x.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("test"!==t){e.next=2;break}return e.abrupt("return","TestUser");case 2:return"user",e.next=5,L("user",null,t);case 5:if((n=e.sent).ok){e.next=10;break}return e.abrupt("return","");case 10:return e.next=12,n.json();case 12:return a=e.sent,r=a.data.username,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return e.ranker<t.ranker?-1:e.ranker>t.ranker?1:0}function A(){return(A=Object(x.a)(w.a.mark((function e(t,n,a){var r,i,s,c,u,o,h,l,p,b,v,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("test"!==t){e.next=2;break}return e.abrupt("return",[2,2]);case 2:return"review_statistics",(r=new Date).setTime(r.getTime()-864e5*a),i=r.toISOString(),s={updated_after:i,subject_types:"vocabulary",percentages_less_than:n},e.next=9,T("review_statistics",s,t);case 9:c=e.sent,u=[],e.t0=w.a.keys(c);case 12:if((e.t1=e.t0()).done){e.next=27;break}if(o=e.t1.value,h=c[o].data,l=h.meaning_current_streak,p=h.reading_current_streak,!(l>3&&p>3)){e.next=21;break}return e.abrupt("continue",12);case 21:b=h.percentage_correct,v=100*Math.min(p,l)+b,d={ranker:v,id:h.subject_id},u.push(d);case 25:e.next=12;break;case 27:return u.sort(S),e.abrupt("return",u);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(w.a.mark((function e(t,n){var a,r,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("test"!==t){e.next=2;break}return e.abrupt("return","TestUser");case 2:return a="subjects/"+n,e.next=5,L(a,null,t);case 5:if((r=e.sent).ok){e.next=10;break}return e.abrupt("return","");case 10:return e.next=12,r.json();case 12:return i=e.sent,s=i.data,e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={login:"login",config:"config",loading:"loading",reviewing:"reviewing"},V=n(12),B=n(15),E={a:"\u3042",i:"\u3044",u:"\u3046",e:"\u3048",o:"\u304a"},F={ka:"\u304b",ki:"\u304d",ku:"\u304f",ke:"\u3051",ko:"\u3053",sa:"\u3055",su:"\u3059",se:"\u305b",so:"\u305d",ta:"\u305f",te:"\u3066",to:"\u3068",na:"\u306a",ni:"\u306b",nu:"\u306c",ne:"\u306d",no:"\u306e",ha:"\u306f",hi:"\u3072",fu:"\u3075",he:"\u3078",ho:"\u307b",ma:"\u307e",mi:"\u307f",mu:"\u3080",me:"\u3081",mo:"\u3082",ya:"\u3084",yu:"\u3086",yo:"\u3088",ra:"\u3089",ri:"\u308a",ru:"\u308b",re:"\u308c",ro:"\u308d",wa:"\u308f",wo:"\u3092",nn:"\u3093",ga:"\u304c",gi:"\u3050",gu:"\u3050",ge:"\u3052",go:"\u3054",za:"\u3056",ji:"\u3058",zu:"\u305a",ze:"\u305c",zo:"\u305e",da:"\u3060",de:"\u3067",do:"\u3069",ba:"\u3070",bi:"\u3073",bu:"\u3076",be:"\u3079",bo:"\u307c",pa:"\u3071",pi:"\u3074",pu:"\u3077",pe:"\u307a",po:"\u307d",ja:"\u3058\u3083",ju:"\u3058\u3085",jo:"\u3058\u3087"},q={kya:"\u304d\u3083",kyu:"\u304d\u3085",kyo:"\u304d\u3087",sha:"\u3057\u3083",shu:"\u3057\u3085",sho:"\u3057\u3087",cha:"\u3061\u3083",chu:"\u3061\u3085",cho:"\u3061\u3087",nya:"\u306b\u3083",nyu:"\u306b\u3085",nyo:"\u306b\u3087",hya:"\u3072\u3083",hyu:"\u3072\u3085",hyo:"\u3072\u3087",mya:"\u307f\u3083",myu:"\u307f\u3085",myo:"\u307f\u3087",rya:"\u308a\u3083",ryu:"\u308a\u3085",ryo:"\u308a\u3087",shi:"\u3057",chi:"\u3061",dji:"\u3062",dzu:"\u3065",gya:"\u304e\u3083",gyu:"\u304e\u3085",gyo:"\u304e\u3087",bya:"\u3073\u3083",byu:"\u3073\u3085",byo:"\u3073\u3087",pya:"\u3074\u3083",pyu:"\u3074\u3085",pyo:"\u3074\u3087",tsu:"\u3064"};var M=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleInput=a.handleInput.bind(Object(h.a)(a)),a.state={inputValue:""},a}return Object(o.a)(n,[{key:"handleInput",value:function(e){var t=e.target.value,n=t,a=t.length;a>3&&(n=n.substring(a-3));var r,i=(n=n.toLowerCase()).split(""),s=[],c=/^[a-z]+$/,u=Object(B.a)(i.reverse());try{for(u.s();!(r=u.n()).done;){var o=r.value;if(!o.match(c))break;s.push(o)}}catch(O){u.e(O)}finally{u.f()}var h,l=s.reverse().join(""),p="",b=0;switch(l.length){case 0:break;case 1:var v=(h=l)in E?[E[h],1]:["",0],d=Object(V.a)(v,2);p=d[0],b=d[1];break;case 2:var j=function(e){return e in F?[F[e],2]:e.charAt(0)===e.charAt(1)?["\u3063",2]:["",0]}(l),f=Object(V.a)(j,2);p=f[0],b=f[1];break;case 3:var g=function(e){return e in q?[q[e],3]:["",0]}(l),y=Object(V.a)(g,2);p=y[0],b=y[1]}if(b){a=t.length;var k=t.substring(0,a-b);k+=p}else k=t;this.setState({inputValue:k})}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("input",{name:"ime",type:"text",onChange:this.handleInput,value:this.state.inputValue})})}}]),n}(r.Component),G=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).num_reviews=a.props.leeches.length,a.incrementReview=a.incrementReview.bind(Object(h.a)(a)),a.review_number=1,a.state={current_leech:a.props.first_leech},a.queueLeech(1),a}return Object(o.a)(n,[{key:"queueLeech",value:function(e){var t=this;if(!(e>=this.num_reviews)){var n=this.props.leeches[e].id;I(this.props.api_key,n).then((function(e){t.next_leech=e}))}}},{key:"incrementReview",value:function(){this.review_number>=this.num_reviews?this.props.endReview():(this.review_number+=1,this.setState({current_leech:this.next_leech}),this.queueLeech(this.review_number))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[this.review_number,"/",this.num_reviews]}),Object(a.jsx)("p",{children:this.state.current_leech.characters}),Object(a.jsx)("button",{onClick:this.incrementReview,children:"Next Review"}),Object(a.jsx)(M,{})]})}}]),n}(r.Component),J=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).checkAuthentication=a.checkAuthentication.bind(Object(h.a)(a)),a.logout=a.logout.bind(Object(h.a)(a)),a.startReview=a.startReview.bind(Object(h.a)(a)),a.endReview=a.endReview.bind(Object(h.a)(a)),a.leeches=null,a.first_leech=null;var r=f.a.get("api-key"),i=z.login,s="";return r&&(i=z.config,s=f.a.get("username")),a.state={page:i,username:s,api_key:r},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){if(this.state.page===z.config){var e=f.a.get("api-key");this.checkAuthentication(e)}}},{key:"checkAuthentication",value:function(e){var t=this;(function(e){return D.apply(this,arguments)})(e).then((function(n){n?(t.setState({username:n,page:z.config,api_key:e}),f.a.set("api-key",e),f.a.set("username",n)):!t.state.page===z.login&&t.logout()}))}},{key:"logout",value:function(){this.setState({page:z.login,username:""}),f.a.remove("api-key")}},{key:"startReview",value:function(e,t){var n=this;this.setState({page:z.loading}),function(e,t,n){return A.apply(this,arguments)}(this.state.api_key,e,t).then((function(e){n.leeches=e;var t=e[0].id;I(n.state.api_key,t).then((function(e){n.first_leech=e,n.setState({page:z.reviewing})}))}))}},{key:"endReview",value:function(){this.setState({page:z.config})}},{key:"render",value:function(){switch(this.state.page){case z.login:return Object(a.jsx)(b,{checkLogin:this.checkAuthentication});case z.config:return Object(a.jsx)(y,{logout:this.logout,name:this.state.username,start:this.startReview});case z.loading:return Object(a.jsx)(k,{});case z.reviewing:return Object(a.jsx)(G,{leeches:this.leeches,first_leech:this.first_leech,api_key:this.state.api_key,endReview:this.endReview})}}}]),n}(r.Component),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),U()}},[[25,1,2]]]);
//# sourceMappingURL=main.a3834dca.chunk.js.map